{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/ahmaddev/Apps/azizyar/front/pages/account/dashboard.js\";\nimport { parseCookies } from '@/helpers/index';\nimport { useRouter } from 'next/router';\nimport Layout from '@/components/Layout';\nimport DashboardEvent from '@/components/DashboardEvent';\nimport { API_URL } from '@/config/index';\nimport styles from '@/styles/Dashboard.module.css';\nexport default function DashboardPage({\n  events,\n  token\n}) {\n  const router = useRouter();\n\n  const deleteEvent = async id => {\n    if (confirm('Are you sure?')) {\n      const res = await fetch(`${API_URL}/events/${id}`, {\n        method: 'DELETE',\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const data = await res.json();\n\n      if (!res.ok) {\n        toast.error(data.message);\n      } else {\n        router.reload();\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    title: \"User Dashboard\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.dash,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"My Events\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 9\n      }, this), events.map(evt => /*#__PURE__*/_jsxDEV(DashboardEvent, {\n        evt: evt,\n        handleDelete: deleteEvent\n      }, evt.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 5\n  }, this);\n}\nexport async function getServerSideProps({\n  req\n}) {\n  const {\n    token\n  } = parseCookies(req);\n  const res = await fetch(`${API_URL}/events/me`, {\n    method: 'GET',\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  const events = await res.json();\n  return {\n    props: {\n      events,\n      token\n    }\n  };\n}","map":{"version":3,"sources":["/Users/ahmaddev/Apps/azizyar/front/pages/account/dashboard.js"],"names":["parseCookies","useRouter","Layout","DashboardEvent","API_URL","styles","DashboardPage","events","token","router","deleteEvent","id","confirm","res","fetch","method","headers","Authorization","data","json","ok","toast","error","message","reload","dash","map","evt","getServerSideProps","req","props"],"mappings":";;AAAA,SAASA,YAAT,QAA6B,iBAA7B;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,cAAP,MAA2B,6BAA3B;AACA,SAASC,OAAT,QAAwB,gBAAxB;AACA,OAAOC,MAAP,MAAmB,+BAAnB;AAEA,eAAe,SAASC,aAAT,CAAuB;AAAEC,EAAAA,MAAF;AAAUC,EAAAA;AAAV,CAAvB,EAA0C;AACvD,QAAMC,MAAM,GAAGR,SAAS,EAAxB;;AAEA,QAAMS,WAAW,GAAG,MAAOC,EAAP,IAAc;AAChC,QAAIC,OAAO,CAAC,eAAD,CAAX,EAA8B;AAC5B,YAAMC,GAAG,GAAG,MAAMC,KAAK,CAAE,GAAEV,OAAQ,WAAUO,EAAG,EAAzB,EAA4B;AACjDI,QAAAA,MAAM,EAAE,QADyC;AAEjDC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAG,UAAST,KAAM;AADxB;AAFwC,OAA5B,CAAvB;AAOA,YAAMU,IAAI,GAAG,MAAML,GAAG,CAACM,IAAJ,EAAnB;;AAEA,UAAI,CAACN,GAAG,CAACO,EAAT,EAAa;AACXC,QAAAA,KAAK,CAACC,KAAN,CAAYJ,IAAI,CAACK,OAAjB;AACD,OAFD,MAEO;AACLd,QAAAA,MAAM,CAACe,MAAP;AACD;AACF;AACF,GAjBD;;AAmBA,sBACE,QAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,gBAAd;AAAA,2BACE;AAAK,MAAA,SAAS,EAAEnB,MAAM,CAACoB,IAAvB;AAAA,8BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF,EAIGlB,MAAM,CAACmB,GAAP,CAAYC,GAAD,iBACV,QAAC,cAAD;AAA6B,QAAA,GAAG,EAAEA,GAAlC;AAAuC,QAAA,YAAY,EAAEjB;AAArD,SAAqBiB,GAAG,CAAChB,EAAzB;AAAA;AAAA;AAAA;AAAA,cADD,CAJH;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAYD;AAED,OAAO,eAAeiB,kBAAf,CAAkC;AAAEC,EAAAA;AAAF,CAAlC,EAA2C;AAChD,QAAM;AAAErB,IAAAA;AAAF,MAAYR,YAAY,CAAC6B,GAAD,CAA9B;AAEA,QAAMhB,GAAG,GAAG,MAAMC,KAAK,CAAE,GAAEV,OAAQ,YAAZ,EAAyB;AAC9CW,IAAAA,MAAM,EAAE,KADsC;AAE9CC,IAAAA,OAAO,EAAE;AACPC,MAAAA,aAAa,EAAG,UAAST,KAAM;AADxB;AAFqC,GAAzB,CAAvB;AAOA,QAAMD,MAAM,GAAG,MAAMM,GAAG,CAACM,IAAJ,EAArB;AAEA,SAAO;AACLW,IAAAA,KAAK,EAAE;AACLvB,MAAAA,MADK;AAELC,MAAAA;AAFK;AADF,GAAP;AAMD","sourcesContent":["import { parseCookies } from '@/helpers/index'\nimport { useRouter } from 'next/router'\nimport Layout from '@/components/Layout'\nimport DashboardEvent from '@/components/DashboardEvent'\nimport { API_URL } from '@/config/index'\nimport styles from '@/styles/Dashboard.module.css'\n\nexport default function DashboardPage({ events, token }) {\n  const router = useRouter()\n\n  const deleteEvent = async (id) => {\n    if (confirm('Are you sure?')) {\n      const res = await fetch(`${API_URL}/events/${id}`, {\n        method: 'DELETE',\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n\n      const data = await res.json()\n\n      if (!res.ok) {\n        toast.error(data.message)\n      } else {\n        router.reload()\n      }\n    }\n  }\n\n  return (\n    <Layout title='User Dashboard'>\n      <div className={styles.dash}>\n        <h1>Dashboard</h1>\n        <h3>My Events</h3>\n\n        {events.map((evt) => (\n          <DashboardEvent key={evt.id} evt={evt} handleDelete={deleteEvent} />\n        ))}\n      </div>\n    </Layout>\n  )\n}\n\nexport async function getServerSideProps({ req }) {\n  const { token } = parseCookies(req)\n\n  const res = await fetch(`${API_URL}/events/me`, {\n    method: 'GET',\n    headers: {\n      Authorization: `Bearer ${token}`,\n    },\n  })\n\n  const events = await res.json()\n\n  return {\n    props: {\n      events,\n      token,\n    },\n  }\n}\n"]},"metadata":{},"sourceType":"module"}