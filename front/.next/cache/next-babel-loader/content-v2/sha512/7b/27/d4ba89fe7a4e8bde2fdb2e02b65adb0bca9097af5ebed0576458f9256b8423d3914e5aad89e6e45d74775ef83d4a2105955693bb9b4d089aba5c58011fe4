{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/ahmaddev/Apps/azizyar/front/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/ahmaddev/Apps/azizyar/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/ahmaddev/Apps/azizyar/front/pages/account/dashboard.js\",\n    _s = $RefreshSig$();\n\nimport { useRouter } from 'next/router';\nimport Layout from '@/components/Layout';\nimport DashboardEvent from '@/components/DashboardEvent';\nimport { API_URL } from '@/config/index';\nimport styles from '@/styles/Dashboard.module.css';\nexport var __N_SSP = true;\nexport default function DashboardPage(_ref) {\n  _s();\n\n  var _this = this;\n\n  var events = _ref.events,\n      token = _ref.token;\n  var router = useRouter();\n\n  var deleteEvent = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(id) {\n      var res, data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!confirm('Are you sure?')) {\n                _context.next = 8;\n                break;\n              }\n\n              _context.next = 3;\n              return fetch(\"\".concat(API_URL, \"/events/\").concat(id), {\n                method: 'DELETE',\n                headers: {\n                  Authorization: \"Bearer \".concat(token)\n                }\n              });\n\n            case 3:\n              res = _context.sent;\n              _context.next = 6;\n              return res.json();\n\n            case 6:\n              data = _context.sent;\n\n              if (!res.ok) {\n                toast.error(data.message);\n              } else {\n                router.reload();\n              }\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function deleteEvent(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    title: \"User Dashboard\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.dash,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"My Events\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 9\n      }, this), events.map(function (evt) {\n        return /*#__PURE__*/_jsxDEV(DashboardEvent, {\n          evt: evt,\n          handleDelete: deleteEvent\n        }, evt.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 11\n        }, _this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 5\n  }, this);\n}\n\n_s(DashboardPage, \"fN7XvhJ+p5oE6+Xlo0NJmXpxjC8=\", false, function () {\n  return [useRouter];\n});\n\n_c = DashboardPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"DashboardPage\");","map":{"version":3,"sources":["/Users/ahmaddev/Apps/azizyar/front/pages/account/dashboard.js"],"names":["useRouter","Layout","DashboardEvent","API_URL","styles","DashboardPage","events","token","router","deleteEvent","id","confirm","fetch","method","headers","Authorization","res","json","data","ok","toast","error","message","reload","dash","map","evt"],"mappings":";;;;;;;AACA,SAASA,SAAT,QAA0B,aAA1B;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,cAAP,MAA2B,6BAA3B;AACA,SAASC,OAAT,QAAwB,gBAAxB;AACA,OAAOC,MAAP,MAAmB,+BAAnB;;AAEA,eAAe,SAASC,aAAT,OAA0C;AAAA;;AAAA;;AAAA,MAAjBC,MAAiB,QAAjBA,MAAiB;AAAA,MAATC,KAAS,QAATA,KAAS;AACvD,MAAMC,MAAM,GAAGR,SAAS,EAAxB;;AAEA,MAAMS,WAAW;AAAA,yEAAG,iBAAOC,EAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACdC,OAAO,CAAC,eAAD,CADO;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAEEC,KAAK,WAAIT,OAAJ,qBAAsBO,EAAtB,GAA4B;AACjDG,gBAAAA,MAAM,EAAE,QADyC;AAEjDC,gBAAAA,OAAO,EAAE;AACPC,kBAAAA,aAAa,mBAAYR,KAAZ;AADN;AAFwC,eAA5B,CAFP;;AAAA;AAEVS,cAAAA,GAFU;AAAA;AAAA,qBASGA,GAAG,CAACC,IAAJ,EATH;;AAAA;AASVC,cAAAA,IATU;;AAWhB,kBAAI,CAACF,GAAG,CAACG,EAAT,EAAa;AACXC,gBAAAA,KAAK,CAACC,KAAN,CAAYH,IAAI,CAACI,OAAjB;AACD,eAFD,MAEO;AACLd,gBAAAA,MAAM,CAACe,MAAP;AACD;;AAfe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAXd,WAAW;AAAA;AAAA;AAAA,KAAjB;;AAmBA,sBACE,QAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,gBAAd;AAAA,2BACE;AAAK,MAAA,SAAS,EAAEL,MAAM,CAACoB,IAAvB;AAAA,8BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF,EAIGlB,MAAM,CAACmB,GAAP,CAAW,UAACC,GAAD;AAAA,4BACV,QAAC,cAAD;AAA6B,UAAA,GAAG,EAAEA,GAAlC;AAAuC,UAAA,YAAY,EAAEjB;AAArD,WAAqBiB,GAAG,CAAChB,EAAzB;AAAA;AAAA;AAAA;AAAA,iBADU;AAAA,OAAX,CAJH;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAYD;;GAlCuBL,a;UACPL,S;;;KADOK,a","sourcesContent":["import { parseCookies } from '@/helpers/index'\nimport { useRouter } from 'next/router'\nimport Layout from '@/components/Layout'\nimport DashboardEvent from '@/components/DashboardEvent'\nimport { API_URL } from '@/config/index'\nimport styles from '@/styles/Dashboard.module.css'\n\nexport default function DashboardPage({ events, token }) {\n  const router = useRouter()\n\n  const deleteEvent = async (id) => {\n    if (confirm('Are you sure?')) {\n      const res = await fetch(`${API_URL}/events/${id}`, {\n        method: 'DELETE',\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n\n      const data = await res.json()\n\n      if (!res.ok) {\n        toast.error(data.message)\n      } else {\n        router.reload()\n      }\n    }\n  }\n\n  return (\n    <Layout title='User Dashboard'>\n      <div className={styles.dash}>\n        <h1>Dashboard</h1>\n        <h3>My Events</h3>\n\n        {events.map((evt) => (\n          <DashboardEvent key={evt.id} evt={evt} handleDelete={deleteEvent} />\n        ))}\n      </div>\n    </Layout>\n  )\n}\n\nexport async function getServerSideProps({ req }) {\n  const { token } = parseCookies(req)\n\n  const res = await fetch(`${API_URL}/events/me`, {\n    method: 'GET',\n    headers: {\n      Authorization: `Bearer ${token}`,\n    },\n  })\n\n  const events = await res.json()\n\n  return {\n    props: {\n      events,\n      token,\n    },\n  }\n}\n"]},"metadata":{},"sourceType":"module"}